<!DOCTYPE html>
<html>
  <head>
    <title>Stencil</title>
    <meta name="description" content="An editor for the MRT City Map">
    <meta name="author" content="MRT Mapping Services">

    <link rel="icon" type="image/png" href="./media/favicon.png">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://unpkg.com/@geoman-io/leaflet-geoman-free@latest/dist/leaflet-geoman.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-sidebar-v2@3.2.3/css/leaflet-sidebar.min.css" />
    
    <link rel="stylesheet" href="styles/style.css">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="scripts/getskin.js"></script>

    <script defer src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <script defer src="https://unpkg.com/@geoman-io/leaflet-geoman-free@latest/dist/leaflet-geoman.min.js"></script>
    <script defer src="https://unpkg.com/leaflet-sidebar-v2@3.2.3/js/leaflet-sidebar.min.js"></script>
    <script defer src="https://unpkg.com/leaflet-textpath@1.2.3/leaflet.textpath.js"></script>

    <script defer src="scripts/map.js"></script>
    <script defer src="scripts/sidebar.js"></script>
    <script defer src="scripts/editor.js"></script>

    <script>
      setInterval(() => {
        document.querySelectorAll(".dynamic-resize").forEach(element => {
          element.style.height = "1px";
          element.style.height = (element.scrollHeight-4)+"px";
        })
      }, 100)

      document.querySelectorAll("[contenteditable]").forEach((element) => {
        element.parentElement.onclick = (e) => {
          e.target.focus();
        }
      })
    </script>
  </head>
  <body>
    <div id="map" oncontextmenu="return false;"></div>
    <!-- Sidebar stuff -->
    <div hidden id="welcome"><div>
      <p>View the <a href="https://mrt-map.github.io/map/guide.html#s5" target="_blank">guide</a> on how to use Stencil.</p>

      <b>Note: Stencil is still under development, expect bugs lurking everywhere.</b>
    </div></div>

    <div hidden id="componentInfo"><div>
      <h1>
        <span contenteditable id="c_id" placeholder="ID"></span>
        <i class="fas fa-pen"></i>
        <b hidden id="c_duplicateIdMsg">Duplicate ID</b>
        <b hidden id="c_emptyIdMsg">Empty ID</b>
      </h1>
      <h3>
        <span style="color: #555555">Displayed as:</span>
        <span contenteditable id="c_displayname" placeholder="Displayname"></span>
        <i class="fas fa-pen"></i>
      </h3>
      <h3>
        <span style="color: #555555">Description:</span>
        <span contenteditable id="c_description" placeholder="Description"></span>
        <i class="fas fa-pen"></i>
      </h3><hr>
      <label for="c_type" style="color: #555555; font-weight: bold;">Component type:</label>
      <select name="c_type" id="c_type">
        <option value="TODO">TODO</option>
      </select><br>
      <span><b style="color: #555555;">Layer:</b> <span contenteditable id="c_layer" placeholder="0"></span>  <i class="fas fa-pen"></i></span>
      
      <table>
        <thead>
          <colgroup>
             <col span="1" style="width: 35%;">
             <col span="1" style="width: 60%;">
             <col span="1" style="width: 5%;">
          </colgroup>
          <tr><th>Attribute name</th><th>Attribute value</th><th>Delete</th></tr>
          <tr hidden id="c_attr-row">
            <td><textarea class="dynamic-resize c_attr-name" style="font-weight: bold;"></textarea></td>
            <td><textarea class="dynamic-resize c_attr-value"></textarea></td>
            <td class="c_attr-delete"><i class="fas fa-times"></i></td>
          </tr>
        </thead>
        <tbody id="c_attr"></tbody>
        <tfoot>
          <tr><td colspan="3" id="c_add-attr"><i class="fas fa-plus"></i> Add new attribute</td></tr>
        </tfoot>
        </table>
    </div></div>
    <!--<div hidden id="discordLogin">
      <p>Logged in as <b id="discordName">-</b></p>
      <button id="login" onclick="window.location.href = `https://discord.com/api/oauth2/authorize?client_id=885173387180277830&redirect_uri=${encodeURIComponent(window.location.href)}&response_type=token&scope=identify`">Log in</button>
    </div>-->

    <div hidden id="typePicker"><div>
    <h1>Type for: <span id="tp_shape">-</span></h1>
    <table style="table-layout: fixed; width: 100%">
      <tbody id="tp_table">
        <tr hidden class="tp_typeOption" id="tp_template">
          <td class="tp_typeColor" style="width: 15%; height: 50%; background-color: red;"><div style="width: 100%; height: 100%;"></div></td>
          <td class="tp_typeName" style="word-wrap: break-word; font-weight: bold; padding-left: 0.5em"></td>
        </tr>
      </tbody>
    </table>
    </div></div>
  </body>
</html>